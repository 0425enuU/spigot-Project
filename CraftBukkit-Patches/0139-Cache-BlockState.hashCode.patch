From 5c9d0e3b7073d441131c71a9f01c5812a9ec4668 Mon Sep 17 00:00:00 2001
From: Axel Uhl <axel.uhl@sap.com>
Date: Thu, 11 Jan 2018 10:34:56 +1100
Subject: [PATCH] Cache BlockState.hashCode


diff --git a/src/main/java/net/minecraft/server/BlockState.java b/src/main/java/net/minecraft/server/BlockState.java
index 60703c627..1d626ce2f 100644
--- a/src/main/java/net/minecraft/server/BlockState.java
+++ b/src/main/java/net/minecraft/server/BlockState.java
@@ -36,7 +36,15 @@ public abstract class BlockState<T extends Comparable<T>> implements IBlockState
         }
     }
 
+    // Spigot start
+    private int hashCode;
     public int hashCode() {
-        return 31 * this.a.hashCode() + this.b.hashCode();
+        int hash = hashCode;
+        if (hash == 0) {
+            hash = 31 * this.a.hashCode() + this.b.hashCode();
+            hashCode = hash;
+        }
+        return hash;
     }
+    // Spigot end
 }
-- 
2.14.1

