From a7074cb42a6e61500be1926ddf1af17e07f4986f Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Fri, 18 Jan 2013 19:31:14 -0500
Subject: [PATCH] Reduce number of LivingEntity collision checks.

---
 .../java/net/minecraft/server/EntityLiving.java    |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

diff --git a/src/main/java/net/minecraft/server/EntityLiving.java b/src/main/java/net/minecraft/server/EntityLiving.java
index 14854ac..322e37f 100644
--- a/src/main/java/net/minecraft/server/EntityLiving.java
+++ b/src/main/java/net/minecraft/server/EntityLiving.java
@@ -1430,12 +1430,20 @@ public abstract class EntityLiving extends Entity {
     }
 
     protected void bg() {
+        // Spigot start
+        boolean skip = false;
+        if (!(this instanceof EntityPlayer) && this.ticksLived % 2 != 0) {
+            skip = true;
+        }
+        // Spigot end
+
         List list = this.world.getEntities(this, this.boundingBox.grow(0.20000000298023224D, 0.0D, 0.20000000298023224D));
 
         if (list != null && !list.isEmpty()) {
             for (int i = 0; i < list.size(); ++i) {
                 Entity entity = (Entity) list.get(i);
 
+                if (entity instanceof EntityLiving && skip) { continue; } // Spigot
                 if (entity.L()) {
                     this.o(entity);
                 }
-- 
1.7.0.4

