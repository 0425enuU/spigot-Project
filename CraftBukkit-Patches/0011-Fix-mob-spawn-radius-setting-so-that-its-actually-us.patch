From 4748514f3c43a25d65ec88e3545b9b4b0316e897 Mon Sep 17 00:00:00 2001
From: Aikar <aikar@aikar.co>
Date: Fri, 11 Jan 2013 14:54:51 -0500
Subject: [PATCH 11/15] Fix mob-spawn-radius setting so that its actually
 used...

---
 src/main/java/net/minecraft/server/SpawnerCreature.java | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/src/main/java/net/minecraft/server/SpawnerCreature.java b/src/main/java/net/minecraft/server/SpawnerCreature.java
index 5bebe8a..ee084a4 100644
--- a/src/main/java/net/minecraft/server/SpawnerCreature.java
+++ b/src/main/java/net/minecraft/server/SpawnerCreature.java
@@ -37,7 +37,10 @@ public final class SpawnerCreature {
             int j;
             // Spigot start - limit radius to spawn distance (chunks aren't loaded)
             if (spawnRadius == 0) {
-                spawnRadius = (byte) worldserver.getServer().getViewDistance();
+                spawnRadius = (byte) worldserver.getWorld().mobSpawnRange;
+                if (spawnRadius > (byte) worldserver.getServer().getViewDistance()) {
+                    spawnRadius = (byte) worldserver.getServer().getViewDistance();
+                }
                 if (spawnRadius > 8) {
                     spawnRadius = 8;
                 }
-- 
1.8.1-rc2

