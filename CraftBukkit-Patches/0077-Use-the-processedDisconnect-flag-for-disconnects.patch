From b59a758752127758ddeb19bec29787fc84d0bcfe Mon Sep 17 00:00:00 2001
From: md_5 <git@md-5.net>
Date: Tue, 17 Dec 2013 18:24:34 +1100
Subject: [PATCH] Use the processedDisconnect flag for disconnects.


diff --git a/src/main/java/net/minecraft/server/PlayerConnection.java b/src/main/java/net/minecraft/server/PlayerConnection.java
index d7dbc54..498e5e6 100644
--- a/src/main/java/net/minecraft/server/PlayerConnection.java
+++ b/src/main/java/net/minecraft/server/PlayerConnection.java
@@ -1823,7 +1823,7 @@ public class PlayerConnection implements PacketPlayInListener {
 
     // CraftBukkit start - Add "isDisconnected" method
     public final boolean isDisconnected() {
-        return !NetworkManager.a(this.networkManager).config().isAutoRead();
+        return this.processedDisconnect; // Spigot - check if we have processed the disconnect, before telling if we really have disconnected.
     }
     // CraftBukkit end
 }
-- 
1.8.3.2

